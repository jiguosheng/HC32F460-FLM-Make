HC32F460开发板自带了一颗8M的FLASH：W25Q64，这么大的FLASH不装点什么感觉有点浪费，但是要装满的话需要单独写一个程序，这在实际开发中失衡麻烦的一件事。于是最近抽空做了一个FLM，分享给大家。大家也可以根据自己的需要自己写一个。
首先从keil安装目录下拷贝一份FLM模板工程：
1
再搜寻FlashOS.h，添加到模板工程中：
2
选择型号HC32F460PETB:
3
如图设置FlashDevice：
4
从官方例程中拷贝W25Qxx驱动至模板工程中：
5
再将相关文件如QSPI、CLK设置文件等拷贝至模板工程中：
6
如图设置Options:
7
添加相关文件至模板工程中：
8
按FlashPrg文件添加初始化，擦除与写函数：
9
编译生成FLM文件：
10
修改文件名并拷贝至keil/ARM/Flash中：
11
加载FLM文件。可以看到此时keil已识别FLM并可以加载了：
12
13
将IROM2设为W25Q64的地址：
14
编写一个大数组并设置地址为IROM2：
15
下载错误？看了一下是RAM for Algorithm设置小了：
16
增大RAM for Algorithm：
17
重新编译下载，可以通过Memory看到data常量成功写入：
18
19
最后说一下，W25Q64的驱动设置必须按如下设置，如果直接使用官方的配置，会发现写入的数据有误：
20